<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="Epidemiologist | PhD researcher | Machine learning, computational metabolomics">
<title>TriplotGUI  - Tutorial(simple) - Code</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./img/TriplotGUI_logo_white.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><style>html{ scroll-behavior: smooth; }</style>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: white;
      }

      .quarto-title-block .quarto-title-banner {
        color: white;
      }
</style>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script><link rel="stylesheet" href="styles.scss">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./img/TriplotGUI_logo_black.png" alt="" class="navbar-logo"></a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">TriplotGUI <i class="fa-brands fa-gitlab" aria-label="gitlab"></i></span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="./introduction.html" rel="" target="">
 <span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./installation.html" rel="" target="">
 <span class="menu-text">Setup</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./workflow.html" rel="" target="">
 <span class="menu-text">Details</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tutorial(simple" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Tutorial(simple)</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-tutorial(simple">
<li>
    <a class="dropdown-item" href="./simple.html" rel="" target="">
 <span class="dropdown-text">User Interface</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./simple_code.html" rel="" target="">
 <span class="dropdown-text">Code</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tutorial(complex" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Tutorial(complex)</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-tutorial(complex">
<li>
    <a class="dropdown-item" href="./complex.html" rel="" target="">
 <span class="dropdown-text">User Interface</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./complex_code.html" rel="" target="">
 <span class="dropdown-text">Code</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item">
    <a class="nav-link" href="./use_case.html" rel="" target="">
 <span class="menu-text">Use Case</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./papers.html" rel="" target="">
 <span class="menu-text">Papers</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About us</span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item compact">
    <a class="nav-link" href="https://yingxiaoyan.gitlab.io/triplotgui_tutorial/" rel="" target=""><i class="bi bi-folder-symlink" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://gitlab.com/YingxiaoYan/TriplotGUI" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/yingxiao-yan" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:yingxiao.yan.007@gmail.com" rel="" target=""><i class="bi bi-envelope" role="img" aria-label="email">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
<div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-left">
      <div class="quarto-title-block"><div><h1 class="title">Tutorial(simple) - Code</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
            <p class="subtitle lead">Simple demo of using code in TriplotGUI</p>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Tutorial</h2>
   
  <ul>
<li><a href="#data-description" id="toc-data-description" class="nav-link active" data-scroll-target="#data-description"><span class="header-section-number">1</span> Data description</a></li>
  <li><a href="#research-question" id="toc-research-question" class="nav-link" data-scroll-target="#research-question"><span class="header-section-number">2</span> Research question</a></li>
  <li>
<a href="#data-exploration" id="toc-data-exploration" class="nav-link" data-scroll-target="#data-exploration"><span class="header-section-number">3</span> Data exploration</a>
  <ul>
<li><a href="#check-camp_2" id="toc-check-camp_2" class="nav-link" data-scroll-target="#check-camp_2"><span class="header-section-number">3.1</span> Check CAMP_2</a></li>
  <li><a href="#check-datasets" id="toc-check-datasets" class="nav-link" data-scroll-target="#check-datasets"><span class="header-section-number">3.2</span> Check datasets</a></li>
  <li><a href="#check-variables-class" id="toc-check-variables-class" class="nav-link" data-scroll-target="#check-variables-class"><span class="header-section-number">3.3</span> Check variables’ class</a></li>
  <li><a href="#check-sanities-for-variables" id="toc-check-sanities-for-variables" class="nav-link" data-scroll-target="#check-sanities-for-variables"><span class="header-section-number">3.4</span> Check sanities for variables</a></li>
  <li><a href="#build-data-for-analysis" id="toc-build-data-for-analysis" class="nav-link" data-scroll-target="#build-data-for-analysis"><span class="header-section-number">3.5</span> Build data for analysis</a></li>
  </ul>
</li>
  <li>
<a href="#code-example-of-using-triplotgui" id="toc-code-example-of-using-triplotgui" class="nav-link" data-scroll-target="#code-example-of-using-triplotgui"><span class="header-section-number">4</span> Code example of using TriplotGUI</a>
  <ul>
<li><a href="#simple_link" id="toc-simple_link" class="nav-link" data-scroll-target="#simple_link"><span class="header-section-number">4.1</span> Step 1: Data reduction of omics data</a></li>
  <li><a href="#step-2-exposures-correlations-outcomes-associations" id="toc-step-2-exposures-correlations-outcomes-associations" class="nav-link" data-scroll-target="#step-2-exposures-correlations-outcomes-associations"><span class="header-section-number">4.2</span> Step 2: Exposures’ correlations &amp; Outcomes’ associations</a></li>
  <li><a href="#step-3-visualization-of-triplot" id="toc-step-3-visualization-of-triplot" class="nav-link" data-scroll-target="#step-3-visualization-of-triplot"><span class="header-section-number">4.3</span> Step 3: Visualization of Triplot</a></li>
  <li><a href="#step-4-mediation-analysis-and-visualization" id="toc-step-4-mediation-analysis-and-visualization" class="nav-link" data-scroll-target="#step-4-mediation-analysis-and-visualization"><span class="header-section-number">4.4</span> Step 4: Mediation analysis and visualization</a></li>
  <li><a href="#step-5-compare-correlations-associations-and-mediations" id="toc-step-5-compare-correlations-associations-and-mediations" class="nav-link" data-scroll-target="#step-5-compare-correlations-associations-and-mediations"><span class="header-section-number">4.5</span> Step 5: Compare correlations, associations and mediations</a></li>
  <li><a href="#step-6-download-data" id="toc-step-6-download-data" class="nav-link" data-scroll-target="#step-6-download-data"><span class="header-section-number">4.6</span> Step 6: Download data</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-page-left" id="quarto-document-content"><p>Before starting,please make sure you have installed the TriplotGUI package following <a href="./installation.html" target="_blank">Setup</a>.</p>
<p>The code of at this page can be downloaded <a href="https://gitlab.com/YingxiaoYan/triplotgui/-/blob/main/Tutorial_code/CAMP_2_applying_TriplotGUI_code.R" target="_blank">here</a></p>
<section id="data-description" class="level1" data-number="1"><h1 data-number="1">
<span class="header-section-number">1</span> Data description</h1>
<p>The data used in this page of tutorial can be downloaded <a href="https://gitlab.com/YingxiaoYan/triplotgui/-/blob/main/data/CAMP_2.rda" target="_blank">here</a> in rda format.</p>
<p>The Data used for this example of code is <strong><em>CAMP_2</em></strong>. This is a synthetic dataset that was simulated from the authentic data used in a cross-sectional study of carbonhydrate alternatives and metabolic phenotypes in Chinese young adults (Liu et al.&nbsp;2018). The simulated data <strong><em>CAMP_2</em></strong> is a list that contains three data frames:</p>
<ul>
<li>Clinical measurements (ClinData, 11 variables): <code>"AGE"</code>, <code>"SEX"</code>, <code>"BMI"</code>, <code>"triglycerides"</code>, <code>"total_cholesterol"</code> <code>"HDL"</code>(high-density lipoprotein cholesterol), <code>"LDL"</code>(low-density lipoprotein cholesterol),, <code>"GGT"</code>(gamma-glutamyltransferase), <code>"ALT"</code>(alanine aminotransferase), <code>"AST"</code>(aspartate aminotransferase), <code>"creatinine"</code>, <code>"Urea_nitrogen"</code>, <code>"Uric_acid"</code>, <code>"Fasting_glucose"</code>.</li>
<li>Plasma metabolites predictive of BMI (MetaboliteData, 20 variables)</li>
<li>Dietary intake as measured by food frequency questionnaires (FoodData, 11 variables): <code>"Refined_grains"</code>, <code>"Coarse_grains"</code>, <code>"Red_meat"</code>, <code>"Poutry"</code>, <code>"Seafood"</code>, <code>"Egg"</code>, <code>"Animal_organs"</code>, <code>"Vegetables"</code>, <code>"Fruits"</code>, <code>"Potatos"</code>, <code>"Legumes"</code>.</li>
</ul>
<p>The data frames are row-wise matched by observation and consist of 300 synthetic observations.</p>
<p><strong>Reference</strong></p>
<p>Liu X, Liao X, Gan W, et al.&nbsp;Inverse Relationship between Coarse Food Grain Intake and Blood Pressure among Young Chinese Adults. Am J Hypertens. 2019;32(4):402–408. <a href="https://academic.oup.com/ajh/article/32/4/402/5236579?login=true" target="_blank">10.1093/ajh/hpy187</a></p>
<p>Schillemans T, Shi L, Liu X, Åkesson A, Landberg R, Brunius C. Visualization and Interpretation of Multivariate Associations with Disease Risk Markers and Disease Risk-The Triplot. Metabolites. 2019 Jul 6;9(7):133. <a href="https://www.mdpi.com/2218-1989/9/7/133" target="_blank">doi: 10.3390/metabo9070133</a></p>
</section><section id="research-question" class="level1" data-number="2"><h1 data-number="2">
<span class="header-section-number">2</span> Research question</h1>
<p>We want to assess the relationship between diet, metabolic profiles and risk factors of metabolic diseases (i.e.&nbsp;BMI, total cholesterol, triglyceride, HDL, LDL). We assume that metabolites serves as mediators, mediating the effect of dietary exposures on BMI outcome.</p>
</section><section id="data-exploration" class="level1" data-number="3"><h1 data-number="3">
<span class="header-section-number">3</span> Data exploration</h1>
<p><strong><em>CAMP_2</em></strong> is loaded in the R environment up on running <code><a href="https://rdrr.io/r/base/library.html">library(TriplotGUI)</a></code>. We will do some data exploration first to see how the data looks like.</p>
<div class="cell styled-output">

</div>
<section id="check-camp_2" class="level2" data-number="3.1"><h2 data-number="3.1" class="anchored" data-anchor-id="check-camp_2">
<span class="header-section-number">3.1</span> Check CAMP_2</h2>
<p>Check <strong><em>CAMP_2</em></strong> as a list:</p>
<div class="cell styled-output">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">CAMP_2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">CAMP_2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "FoodData"       "MetaboliteData" "ClinData"      </code></pre>
</div>
</div>
</section><section id="check-datasets" class="level2" data-number="3.2"><h2 data-number="3.2" class="anchored" data-anchor-id="check-datasets">
<span class="header-section-number">3.2</span> Check datasets</h2>
<p>Check the names of variables in each data:</p>
<div class="cell styled-output">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">CAMP_2</span><span class="op">$</span><span class="va">ClinData</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code> [1] "AGE"               "SEX"               "BMI"              
 [4] "triglycerides"     "total_cholesterol" "HDL"              
 [7] "LDL"               "GGT"               "ALT"              
[10] "AST"               "creatinine"        "Urea_nitrogen"    
[13] "Uric_acid"         "Fasting_glucose"  </code></pre>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">CAMP_2</span><span class="op">$</span><span class="va">MetaboliteData</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code> [1] "PC_P_20_0_22_6_"                                                                
 [2] "X1__3_4_Dihydroxyphenyl__7__4_hydroxy_3_methoxyphenyl__1_6_heptadiene_3_5_dione"
 [3] "Unknown_675.6485_9.35"                                                          
 [4] "Unknown_1066.9034_10.16"                                                        
 [5] "PC_42_8_"                                                                       
 [6] "Unknown_931.7610_9.68"                                                          
 [7] "TG_52_0_"                                                                       
 [8] "CE_22_4_"                                                                       
 [9] "Neutral_glycosphingolipids1023.67"                                              
[10] "TG_58_10_"                                                                      
[11] "Neutral_glycosphingolipids971.72"                                               
[12] "Unknown_914.7433_10.06"                                                         
[13] "Cucurbic_acid"                                                                  
[14] "DG_16_0_18_2_"                                                                  
[15] "Indoleacrylic_acid"                                                             
[16] "PC_O_20_0_22_6_"                                                                
[17] "Unknown_948.6589_8.51"                                                          
[18] "Unknown_858.5318_5.49"                                                          
[19] "O_propanoyl_carnitine"                                                          
[20] "DG_38_5_"                                                                       </code></pre>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">CAMP_2</span><span class="op">$</span><span class="va">FoodData</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code> [1] "Refined_grains" "Coarse_grains"  "Red_meat"       "Poutry"        
 [5] "Seafood"        "Egg"            "Animal_organs"  "Vegetables"    
 [9] "Fruits"         "Potatos"        "Legumes"       </code></pre>
</div>
</div>
</section><section id="check-variables-class" class="level2" data-number="3.3"><h2 data-number="3.3" class="anchored" data-anchor-id="check-variables-class">
<span class="header-section-number">3.3</span> Check variables’ class</h2>
<p>We then transform the data to dataframe format and then use TriplotGUI’s <code>checkdata()</code> function in to examine the classes of variables.</p>
<div class="cell styled-output">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ClinData</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">CAMP_2</span><span class="op">$</span><span class="va">ClinData</span><span class="op">)</span></span>
<span><span class="va">MetaboliteData</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">CAMP_2</span><span class="op">$</span><span class="va">MetaboliteData</span><span class="op">)</span></span>
<span><span class="va">FoodData</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">CAMP_2</span><span class="op">$</span><span class="va">FoodData</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ClinData_check</span><span class="op">&lt;-</span><span class="fu">checkdata</span><span class="op">(</span><span class="va">ClinData</span><span class="op">)</span></span>
<span><span class="va">MetaboliteData_check</span><span class="op">&lt;-</span><span class="fu">checkdata</span><span class="op">(</span><span class="va">MetaboliteData</span><span class="op">)</span></span>
<span><span class="va">FoodData_check</span><span class="op">&lt;-</span><span class="fu">checkdata</span><span class="op">(</span><span class="va">FoodData</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell styled-output">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ClinData_check</span><span class="op">$</span><span class="va">class_sumamry_statistics</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>$check_class_vector
              AGE               SEX               BMI     triglycerides 
        "numeric"          "factor"         "numeric"         "numeric" 
total_cholesterol               HDL               LDL               GGT 
        "numeric"         "numeric"         "numeric"         "numeric" 
              ALT               AST        creatinine     Urea_nitrogen 
        "numeric"         "numeric"         "numeric"         "numeric" 
        Uric_acid   Fasting_glucose 
        "numeric"         "numeric" 

$check_class_table
check_class_vector
 factor numeric 
      1      13 </code></pre>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">MetaboliteData_check</span><span class="op">$</span><span class="va">class_sumamry_statistics</span><span class="op">$</span><span class="va">check_class_table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>check_class_vector
numeric 
     20 </code></pre>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">FoodData_check</span><span class="op">$</span><span class="va">class_sumamry_statistics</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>$check_class_vector
Refined_grains  Coarse_grains       Red_meat         Poutry        Seafood 
     "numeric"      "numeric"      "numeric"      "numeric"      "numeric" 
           Egg  Animal_organs     Vegetables         Fruits        Potatos 
     "numeric"      "numeric"      "numeric"      "numeric"      "numeric" 
       Legumes 
     "numeric" 

$check_class_table
check_class_vector
numeric 
     11 </code></pre>
</div>
</div>
</section><section id="check-sanities-for-variables" class="level2" data-number="3.4"><h2 data-number="3.4" class="anchored" data-anchor-id="check-sanities-for-variables">
<span class="header-section-number">3.4</span> Check sanities for variables</h2>
<p>Whether each variable contains missing (NA) or abnormal values (e.g.&nbsp;NAN, negative values, Indefinite values, blank values) can also be checked.</p>
<p>The previous <code>checkdata()</code> function can also generate a table to summarize how many and how many percentage of observations contain NA, NAN, zero, negative, indefinite(inf),and blank values(” “) for each variable in each data frame.</p>
<div class="cell styled-output">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ClinData_check</span><span class="op">$</span><span class="va">everycolumn</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["AGE"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["SEX"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["BMI"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["triglycerides"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["total_cholesterol"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["HDL"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["LDL"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["GGT"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["ALT"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["AST"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["creatinine"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["Urea_nitrogen"],"name":[12],"type":["dbl"],"align":["right"]},{"label":["Uric_acid"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["Fasting_glucose"],"name":[14],"type":["dbl"],"align":["right"]}],"data":[{"1":"0","2":"0","3":"0","4":"0.00000000","5":"0","6":"0","7":"0","8":"0.00000000","9":"0.0000000","10":"0","11":"0","12":"0","13":"0","14":"0","_rn_":"NA_number"},{"1":"0","2":"0","3":"0","4":"0.00000000","5":"0","6":"0","7":"0","8":"0.00000000","9":"0.0000000","10":"0","11":"0","12":"0","13":"0","14":"0","_rn_":"NA_percentage"},{"1":"0","2":"0","3":"0","4":"0.00000000","5":"0","6":"0","7":"0","8":"0.00000000","9":"0.0000000","10":"0","11":"0","12":"0","13":"0","14":"0","_rn_":"NaN_number"},{"1":"0","2":"0","3":"0","4":"0.00000000","5":"0","6":"0","7":"0","8":"0.00000000","9":"0.0000000","10":"0","11":"0","12":"0","13":"0","14":"0","_rn_":"NaN_percentage"},{"1":"0","2":"0","3":"0","4":"0.00000000","5":"0","6":"0","7":"0","8":"0.00000000","9":"0.0000000","10":"0","11":"0","12":"0","13":"0","14":"0","_rn_":"negative_number"},{"1":"0","2":"0","3":"0","4":"0.00000000","5":"0","6":"0","7":"0","8":"0.00000000","9":"0.0000000","10":"0","11":"0","12":"0","13":"0","14":"0","_rn_":"negative_percentage"},{"1":"0","2":"0","3":"0","4":"4.00000000","5":"0","6":"0","7":"0","8":"14.00000000","9":"65.0000000","10":"0","11":"0","12":"0","13":"0","14":"0","_rn_":"zero_number"},{"1":"0","2":"0","3":"0","4":"0.01333333","5":"0","6":"0","7":"0","8":"0.04666667","9":"0.2166667","10":"0","11":"0","12":"0","13":"0","14":"0","_rn_":"zero_percentage"},{"1":"0","2":"0","3":"0","4":"0.00000000","5":"0","6":"0","7":"0","8":"0.00000000","9":"0.0000000","10":"0","11":"0","12":"0","13":"0","14":"0","_rn_":"inf_number"},{"1":"0","2":"0","3":"0","4":"0.00000000","5":"0","6":"0","7":"0","8":"0.00000000","9":"0.0000000","10":"0","11":"0","12":"0","13":"0","14":"0","_rn_":"inf_percentage"},{"1":"0","2":"0","3":"0","4":"0.00000000","5":"0","6":"0","7":"0","8":"0.00000000","9":"0.0000000","10":"0","11":"0","12":"0","13":"0","14":"0","_rn_":"blank_number"},{"1":"0","2":"0","3":"0","4":"0.00000000","5":"0","6":"0","7":"0","8":"0.00000000","9":"0.0000000","10":"0","11":"0","12":"0","13":"0","14":"0","_rn_":"blank_percentage"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">MetaboliteData_check</span><span class="op">$</span><span class="va">everycolumn</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["PC_P_20_0_22_6_"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["X1__3_4_Dihydroxyphenyl__7__4_hydroxy_3_methoxyphenyl__1_6_heptadiene_3_5_dione"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Unknown_675.6485_9.35"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Unknown_1066.9034_10.16"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["PC_42_8_"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Unknown_931.7610_9.68"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["TG_52_0_"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["CE_22_4_"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["Neutral_glycosphingolipids1023.67"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["TG_58_10_"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["Neutral_glycosphingolipids971.72"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["Unknown_914.7433_10.06"],"name":[12],"type":["dbl"],"align":["right"]},{"label":["Cucurbic_acid"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["DG_16_0_18_2_"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["Indoleacrylic_acid"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["PC_O_20_0_22_6_"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["Unknown_948.6589_8.51"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["Unknown_858.5318_5.49"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["O_propanoyl_carnitine"],"name":[19],"type":["dbl"],"align":["right"]},{"label":["DG_38_5_"],"name":[20],"type":["dbl"],"align":["right"]}],"data":[{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0.00000000","7":"0","8":"0.00000000","9":"0","10":"0.00000000","11":"0","12":"0","13":"0","14":"0.000000000","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","_rn_":"NA_number"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0.00000000","7":"0","8":"0.00000000","9":"0","10":"0.00000000","11":"0","12":"0","13":"0","14":"0.000000000","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","_rn_":"NA_percentage"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0.00000000","7":"0","8":"0.00000000","9":"0","10":"0.00000000","11":"0","12":"0","13":"0","14":"0.000000000","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","_rn_":"NaN_number"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0.00000000","7":"0","8":"0.00000000","9":"0","10":"0.00000000","11":"0","12":"0","13":"0","14":"0.000000000","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","_rn_":"NaN_percentage"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0.00000000","7":"0","8":"0.00000000","9":"0","10":"0.00000000","11":"0","12":"0","13":"0","14":"0.000000000","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","_rn_":"negative_number"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0.00000000","7":"0","8":"0.00000000","9":"0","10":"0.00000000","11":"0","12":"0","13":"0","14":"0.000000000","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","_rn_":"negative_percentage"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"7.00000000","7":"0","8":"16.00000000","9":"0","10":"8.00000000","11":"0","12":"0","13":"0","14":"1.000000000","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","_rn_":"zero_number"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0.02333333","7":"0","8":"0.05333333","9":"0","10":"0.02666667","11":"0","12":"0","13":"0","14":"0.003333333","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","_rn_":"zero_percentage"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0.00000000","7":"0","8":"0.00000000","9":"0","10":"0.00000000","11":"0","12":"0","13":"0","14":"0.000000000","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","_rn_":"inf_number"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0.00000000","7":"0","8":"0.00000000","9":"0","10":"0.00000000","11":"0","12":"0","13":"0","14":"0.000000000","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","_rn_":"inf_percentage"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0.00000000","7":"0","8":"0.00000000","9":"0","10":"0.00000000","11":"0","12":"0","13":"0","14":"0.000000000","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","_rn_":"blank_number"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0.00000000","7":"0","8":"0.00000000","9":"0","10":"0.00000000","11":"0","12":"0","13":"0","14":"0.000000000","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","_rn_":"blank_percentage"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">FoodData_check</span><span class="op">$</span><span class="va">everycolumn</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Refined_grains"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Coarse_grains"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Red_meat"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Poutry"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["Seafood"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Egg"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Animal_organs"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["Vegetables"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["Fruits"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["Potatos"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["Legumes"],"name":[11],"type":["dbl"],"align":["right"]}],"data":[{"1":"0.0000000","2":"0.0000000","3":"0.0000000","4":"0.0000000","5":"0.0000000","6":"0.0000000","7":"0.0000000","8":"0.00","9":"0.0000000","10":"0.0000000","11":"0.0000000","_rn_":"NA_number"},{"1":"0.0000000","2":"0.0000000","3":"0.0000000","4":"0.0000000","5":"0.0000000","6":"0.0000000","7":"0.0000000","8":"0.00","9":"0.0000000","10":"0.0000000","11":"0.0000000","_rn_":"NA_percentage"},{"1":"0.0000000","2":"0.0000000","3":"0.0000000","4":"0.0000000","5":"0.0000000","6":"0.0000000","7":"0.0000000","8":"0.00","9":"0.0000000","10":"0.0000000","11":"0.0000000","_rn_":"NaN_number"},{"1":"0.0000000","2":"0.0000000","3":"0.0000000","4":"0.0000000","5":"0.0000000","6":"0.0000000","7":"0.0000000","8":"0.00","9":"0.0000000","10":"0.0000000","11":"0.0000000","_rn_":"NaN_percentage"},{"1":"0.0000000","2":"0.0000000","3":"0.0000000","4":"0.0000000","5":"0.0000000","6":"0.0000000","7":"0.0000000","8":"0.00","9":"0.0000000","10":"0.0000000","11":"0.0000000","_rn_":"negative_number"},{"1":"0.0000000","2":"0.0000000","3":"0.0000000","4":"0.0000000","5":"0.0000000","6":"0.0000000","7":"0.0000000","8":"0.00","9":"0.0000000","10":"0.0000000","11":"0.0000000","_rn_":"negative_percentage"},{"1":"65.0000000","2":"110.0000000","3":"101.0000000","4":"85.0000000","5":"103.0000000","6":"100.0000000","7":"116.0000000","8":"57.00","9":"56.0000000","10":"67.0000000","11":"79.0000000","_rn_":"zero_number"},{"1":"0.2166667","2":"0.3666667","3":"0.3366667","4":"0.2833333","5":"0.3433333","6":"0.3333333","7":"0.3866667","8":"0.19","9":"0.1866667","10":"0.2233333","11":"0.2633333","_rn_":"zero_percentage"},{"1":"0.0000000","2":"0.0000000","3":"0.0000000","4":"0.0000000","5":"0.0000000","6":"0.0000000","7":"0.0000000","8":"0.00","9":"0.0000000","10":"0.0000000","11":"0.0000000","_rn_":"inf_number"},{"1":"0.0000000","2":"0.0000000","3":"0.0000000","4":"0.0000000","5":"0.0000000","6":"0.0000000","7":"0.0000000","8":"0.00","9":"0.0000000","10":"0.0000000","11":"0.0000000","_rn_":"inf_percentage"},{"1":"0.0000000","2":"0.0000000","3":"0.0000000","4":"0.0000000","5":"0.0000000","6":"0.0000000","7":"0.0000000","8":"0.00","9":"0.0000000","10":"0.0000000","11":"0.0000000","_rn_":"blank_number"},{"1":"0.0000000","2":"0.0000000","3":"0.0000000","4":"0.0000000","5":"0.0000000","6":"0.0000000","7":"0.0000000","8":"0.00","9":"0.0000000","10":"0.0000000","11":"0.0000000","_rn_":"blank_percentage"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You shall only continue when the class of variables are correct and the missing or abnormal values in the variable are properly handled.</p>
</div>
</div>
</section><section id="build-data-for-analysis" class="level2" data-number="3.5"><h2 data-number="3.5" class="anchored" data-anchor-id="build-data-for-analysis">
<span class="header-section-number">3.5</span> Build data for analysis</h2>
<p>We see food data as our exposures and BMI, triglycerides, total_cholesterol, HDL and LDL as outcomes. We want to explore their relationships through the metabolomics data, using metabolites as assumed mediators. Sex and age are used as potential confounders for exposure-mediator and mediator-outcome association.</p>
<div class="cell styled-output">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">exposure1</span><span class="op">&lt;-</span><span class="va">FoodData</span></span>
<span><span class="va">Omics1</span><span class="op">&lt;-</span><span class="va">MetaboliteData</span></span>
<span><span class="va">outcome1</span><span class="op">&lt;-</span><span class="va">ClinData</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"BMI"</span>,<span class="st">"triglycerides"</span>,<span class="st">"total_cholesterol"</span>,<span class="st">"HDL"</span>,<span class="st">"LDL"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">covariates1</span><span class="op">&lt;-</span><span class="va">ClinData</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"SEX"</span> ,<span class="st">"AGE"</span><span class="op">)</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section></section><section id="code-example-of-using-triplotgui" class="level1" data-number="4"><h1 data-number="4">
<span class="header-section-number">4</span> Code example of using TriplotGUI</h1>
<p>We will use the most simple settings in this example. Please go to <a href="./complex_code.html" target="_blank">Tutorial(complex)</a>.if you want to try more advanced settings.</p>
<section id="simple_link" class="level2" data-number="4.1"><h2 data-number="4.1" class="anchored" data-anchor-id="simple_link">
<span class="header-section-number">4.1</span> Step 1: Data reduction of omics data</h2>
<p>Using <code>TriplotGUI</code> package, first we perform dimension reduction, i.e.&nbsp;principal component analysis (PCA) on metabolomics data.</p>
<div class="cell styled-output">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">reduced_Omics1</span><span class="op">&lt;-</span><span class="fu">PCAorWGCNA_plots</span><span class="op">(</span>dataframe<span class="op">=</span><span class="va">Omics1</span>,</span>
<span>                                 pc_num <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                                 option<span class="op">=</span><span class="st">"PCA"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>You can see scree plot, score plot, loadings plot and biplot at this stage.</p>
<div class="cell styled-output" data-fold.plot="true">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">reduced_Omics1</span><span class="op">$</span><span class="va">scree_plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details><summary>
plot
</summary><div class="cell-output-display">
<p><img src="simple_code_files/figure-html/showcode_runcode_showoutput_6-1.png" class="img-fluid" width="672"></p>
</div>
</details><details open=""><summary>Code</summary><div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">reduced_Omics1</span><span class="op">$</span><span class="va">score_plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details><summary>
plot
</summary><div class="cell-output-display">
<p><img src="simple_code_files/figure-html/showcode_runcode_showoutput_6-2.png" class="img-fluid" width="672"></p>
</div>
</details><details open=""><summary>Code</summary><div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">reduced_Omics1</span><span class="op">$</span><span class="va">loading_plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details><summary>
plot
</summary><div class="cell-output-display">
<p><img src="simple_code_files/figure-html/showcode_runcode_showoutput_6-3.png" class="img-fluid" width="672"></p>
</div>
</details><details open=""><summary>Code</summary><div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">reduced_Omics1</span><span class="op">$</span><span class="va">scoreloading_plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details><summary>
plot
</summary><div class="cell-output-display">
<p><img src="simple_code_files/figure-html/showcode_runcode_showoutput_6-4.png" class="img-fluid" width="672"></p>
</div>
</details>
</div>
<p>We then build a TPObject based on the data reduction result, which is used for saving information and pass them through steps in TriplotGUI.</p>
<div class="cell styled-output" data-fold.output="false">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">scores</span><span class="op">=</span><span class="va">reduced_Omics1</span><span class="op">$</span><span class="va">object</span><span class="op">$</span><span class="va">scores</span></span>
<span><span class="va">loadings</span><span class="op">&lt;-</span><span class="va">reduced_Omics1</span><span class="op">$</span><span class="va">object</span><span class="op">$</span><span class="va">loadings</span></span>
<span><span class="va">variance</span><span class="op">&lt;-</span> <span class="va">reduced_Omics1</span><span class="op">$</span><span class="va">object</span><span class="op">$</span><span class="va">variance</span></span>
<span><span class="va">TPObject1</span><span class="op">&lt;-</span><span class="fu">makeTPO</span><span class="op">(</span>scores<span class="op">=</span><span class="va">scores</span>,</span>
<span>                   loadings<span class="op">=</span><span class="va">loadings</span>,</span>
<span>                   variance<span class="op">=</span><span class="va">variance</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Making TriPlotObject (TPO)
--------------------------
Loading matrix has 20 variables and 20 components.

Score matrix has 300 observations and 20 components.

TPO has 0 attached correlations.
TPO has 0 attached risks.</code></pre>
</div>
</div>
</section><section id="step-2-exposures-correlations-outcomes-associations" class="level2" data-number="4.2"><h2 data-number="4.2" class="anchored" data-anchor-id="step-2-exposures-correlations-outcomes-associations">
<span class="header-section-number">4.2</span> Step 2: Exposures’ correlations &amp; Outcomes’ associations</h2>
<p>The correlations between principal component (PC) scores and food items were calculated using Pearson correlations, adjusting for confounders. The associations between PC scores and risk markers were investigated using linear regression (since all food variables are numeric).</p>
<p>The PC scores are saved in the TPObject and the TPObject can be directly used to calculate the correlation coefficients and p values with exposures(food variables) in the <code>makeCorr()</code> function, adjusting for confounders.</p>
<div class="cell styled-output" data-fold.output="false">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">Correlations_object</span><span class="op">&lt;-</span><span class="fu">makeCorr</span><span class="op">(</span>TPObject<span class="op">=</span><span class="va">TPObject1</span>,</span>
<span>                              corrData<span class="op">=</span><span class="va">exposure1</span>,</span>
<span>                              confounder<span class="op">=</span><span class="va">covariates1</span>,</span>
<span>                              method<span class="op">=</span><span class="st">"pearson"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The result of correlations are then added into the TPObject.</p>
<div class="cell styled-output" data-fold.output="false">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">TPObject2</span><span class="op">&lt;-</span><span class="fu">addCorr</span><span class="op">(</span>TPObject<span class="op">=</span><span class="va">TPObject1</span>,</span>
<span>                   Corr<span class="op">=</span><span class="va">Correlations_object</span><span class="op">$</span><span class="va">cor_estimate</span>,</span>
<span>                   Corr_p<span class="op">=</span><span class="va">Correlations_object</span><span class="op">$</span><span class="va">cor_pvalue</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Adding correlation to TPO
-------------------------
Please ensure same number of components in TPO and correlation matrix

TPO has 11 attached correlations.
TPO has 0 attached risks.</code></pre>
</div>
</div>
<p>Similarly, the risk estimates (beta coefficients from linear regression) and p values can be calculated from the PC scores saved in the TPObject and the outcome variables, adjusting for confounders.</p>
<div class="cell styled-output" data-fold.output="false">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">Risks_object</span><span class="op">&lt;-</span><span class="fu">coefficient_get</span><span class="op">(</span>TPObject<span class="op">=</span><span class="va">TPObject2</span>,</span>
<span>                              outcome<span class="op">=</span><span class="va">outcome1</span>,</span>
<span>                              confounder<span class="op">=</span><span class="va">covariates1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The result of risk estimates are then added into the TPObject.</p>
<div class="cell styled-output" data-fold.output="false">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">TPObject3</span><span class="op">&lt;-</span><span class="fu">addRisk</span><span class="op">(</span>TPObject<span class="op">=</span><span class="va">TPObject2</span>,</span>
<span>                   Risk<span class="op">=</span><span class="va">Risks_object</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Adding risk to TPO
------------------
Please add risks one by one with component in rows and estimates, se:s and (optionally) p-values in columns
Please ensure same number of components in TPO and risk matrix

TPO has 11 attached correlations.
TPO has 5 attached risks.</code></pre>
</div>
</div>
</section><section id="step-3-visualization-of-triplot" class="level2" data-number="4.3"><h2 data-number="4.3" class="anchored" data-anchor-id="step-3-visualization-of-triplot">
<span class="header-section-number">4.3</span> Step 3: Visualization of Triplot</h2>
<p>Generate Triplot: Note that Triplot can be generated from any TPObject.</p>
<div class="cell styled-output" data-fold.output="false">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">Triplot_object3</span><span class="op">&lt;-</span><span class="fu">TriplotGUI</span><span class="op">(</span><span class="va">TPObject3</span>,</span>
<span>                            riskOR<span class="op">=</span><span class="cn">F</span><span class="op">)</span> <span class="co">#risks is shown as coeffcients, not odds ratio</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Plotting the triplot</p>
<div class="cell styled-output" data-fold.plot="true">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">Triplot_object3</span><span class="op">$</span><span class="va">triplot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details><summary>
plot
</summary><div class="cell-output-display">
<p><img src="simple_code_files/figure-html/showcode_runcode_showoutput_10-1.png" class="img-fluid" width="672"></p>
</div>
</details>
</div>
<p>In the triplot, PC1 reflected metabolites that were positively associated with BMI and also correlated with a high intake of meat and refined grains, adjusting for age and sex. This implies that the metabolite features that contributes most to PC1, are likely to provide useful information for a potential mechanism of how red meat and refrained grains intake may affect BMI.</p>
</section><section id="step-4-mediation-analysis-and-visualization" class="level2" data-number="4.4"><h2 data-number="4.4" class="anchored" data-anchor-id="step-4-mediation-analysis-and-visualization">
<span class="header-section-number">4.4</span> Step 4: Mediation analysis and visualization</h2>
<p>Mediation analysis is then performed using the conventional “product” method on the our exposures (i.e.&nbsp;Refined grains, Red meat), mediators (i.e.&nbsp;PC1 and PC2) and outcome (i.e.&nbsp;BMI) of interest, adjusting for age and sex for both exposure-mediator and mediator-outcome relationship.</p>
<div class="cell styled-output" data-fold.output="false">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mediation_object3</span><span class="op">&lt;-</span></span>
<span>  <span class="fu">get_mediation_traditional</span> <span class="op">(</span>mediator<span class="op">=</span><span class="va">TPObject3</span><span class="op">$</span><span class="va">scores</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span>,drop<span class="op">=</span><span class="cn">F</span><span class="op">]</span>, </span>
<span>                             <span class="co"># Specfiying at least 2 components so that there can be a 2-dimensional plot</span></span>
<span>                             exposure<span class="op">=</span><span class="va">exposure1</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Refined_grains"</span>,<span class="st">"Red_meat"</span><span class="op">)</span>,drop<span class="op">=</span><span class="cn">F</span><span class="op">]</span>,</span>
<span>                             outcome<span class="op">=</span><span class="va">outcome1</span><span class="op">[</span>,<span class="st">"BMI"</span>,drop<span class="op">=</span><span class="cn">F</span><span class="op">]</span>,</span>
<span>                             confounder_ME<span class="op">=</span><span class="va">covariates1</span>,</span>
<span>                             confounder_OE<span class="op">=</span><span class="va">covariates1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Look at the barplot to have a more direct view on direct, indirect and total effects for each combination</p>
<div class="cell styled-output" data-fold.plot="true">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mediation_plot_object3</span><span class="op">&lt;-</span><span class="fu">plot_mediation</span><span class="op">(</span><span class="va">mediation_object3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell styled-output" data-fold.plot="true">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mediation_plot_object3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details><summary>
plot
</summary><div class="cell-output-display">
<p><img src="simple_code_files/figure-html/showcode_runcode_showoutput_11-1.png" class="img-fluid" width="672"></p>
</div>
</details>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The barplot showed direct, indirect and total effect for each exposure-mediator-outcome combination. It is a convenient tool to check the direction and magnitude of mediation estimates. Red color represents significant positive effect (p&lt;0.05); Blue color represents significant negative effect (p&lt;0.05). Grey represents insignificant effect. One star for p&lt;0.05; Two stars for p&lt;0.01; Three stars for p&lt;0.001;</p>
</div>
</div>
<p>Add the mediation result into the TPObject.</p>
<div class="cell styled-output" data-fold.plot="true">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">TPObject4</span><span class="op">&lt;-</span><span class="fu">add_mediation</span><span class="op">(</span><span class="va">TPObject3</span>, <span class="va">mediation_object3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Adding mediation to TPO
-------------------------
Note that the exposures, mediators and outcomes are selected and not necessarily reflect total number of variables

TPO mediation has used 2 mediators, 2 exposures, 1 outcomes
Mediators are PC1, PC2 
Exposures are Refined_grains, Red_meat 
Outcomes are BMItessssssssssssssssssssssss1111111111111111111111111111111111111111111111111111111111111111111111111111222222222222222222222222222222222222222222222222222222222222222222333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333320 EO_names20 PC_names20 estimates20 p_values20 mediation_estimate_names20 Exposure_names20 Outcome_namesPC1 PC1 PC2 PC2 PC1 PC1 PC2 PC2 PC1 PC1 PC2 PC2 PC1 PC1 PC2 PC2 PC1 PC1 PC2 PC2sddddddsdfggggggggggggggggggggggggggggggg444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444441.187396e-20 8.1822e-22 2.315783e-06 1.4264e-06 0.4505731 0.1003014 0.001111641 0.003746183 0.002361381 0.01371697 0.002361381 0.01371697 0.0006457253 0.004530111 0.00866911 0.0272195 0.0006457253 0.004530111 0.00866911 0.027219520201234567891011121314151617181920DoneDONNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNnnntesssssssssssssssssssssssssssssssssssssstesssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss</code></pre>
</div>
</div>
<p>Make the triplot with mediation.</p>
<div class="cell styled-output" data-fold.plot="true">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb42"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">Triplot_object4</span><span class="op">&lt;-</span><span class="fu">mediation_triplot</span><span class="op">(</span><span class="va">TPObject4</span>,</span>
<span>                                   which_show <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"IE"</span>,<span class="st">"TE"</span><span class="op">)</span></span>
<span>                                   <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Only showing the mediation estimates (indirect and total effect).</p>
<div class="cell styled-output" data-fold.plot="true">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">Triplot_object4</span><span class="op">$</span><span class="va">mediation_plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details><summary>
plot
</summary><div class="cell-output-display">
<p><img src="simple_code_files/figure-html/showcode_runcode_showoutput_13-1.png" class="img-fluid" width="672"></p>
</div>
</details>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The indirect effect is presented as triangle points and the total effect is presented as circles. While indirect effect can only be presented with a mediator(e.g.&nbsp;PC1, PC2), total effect is always there and the value remains the same for specific exposure-outcome pairs, regardless of which mediation analysis we want to present in the figure.</p>
</div>
</div>
<p>Plotting the triplot with mediation</p>
<div class="cell styled-output" data-fold.plot="true">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb44"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">Triplot_object4</span><span class="op">$</span><span class="va">final_plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details><summary>
plot
</summary><div class="cell-output-display">
<p><img src="simple_code_files/figure-html/showcode_runcode_showoutput_14-1.png" class="img-fluid" width="672"></p>
</div>
</details>
</div>
<p>Base on the barplot and the triplot with mediaiton, we observed a significant mediation effect through PC1 for Red_meat-BMI and refined_grain-BMI association. This further implies that the metabolite features that contributes to PC1 are likely to mediate the pathway from red meat and refined grain intake to BMI change.</p>
</section><section id="step-5-compare-correlations-associations-and-mediations" class="level2" data-number="4.5"><h2 data-number="4.5" class="anchored" data-anchor-id="step-5-compare-correlations-associations-and-mediations">
<span class="header-section-number">4.5</span> Step 5: Compare correlations, associations and mediations</h2>
<p>Users can check the heatmaps of correlations, risk estimations and mediation results from the TPObject through the <code>checkTPO_ggplot()</code> function in TriplotGUI.</p>
<div class="cell styled-output" data-fold.plot="true">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">checkTPObject4</span><span class="op">&lt;-</span><span class="fu">checkTPO_ggplot</span><span class="op">(</span><span class="va">TPObject4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Correlation coefficients and p values between PC scores and exposures:</p>
<div class="cell styled-output" data-fold.plot="true">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb46"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">checkTPObject4</span><span class="op">$</span><span class="va">corr_coefficients</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details><summary>
plot
</summary><div class="cell-output-display">
<p><img src="simple_code_files/figure-html/showcode_runcode_showoutput_15A-1.png" class="img-fluid" width="672"></p>
</div>
</details>
</div>
<p>Risk estimates(beta coefficients) and p values between PC scores and outcomes:</p>
<div class="cell styled-output" data-fold.plot="true">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">checkTPObject4</span><span class="op">$</span><span class="va">risk_coefficients</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details><summary>
plot
</summary><div class="cell-output-display">
<p><img src="simple_code_files/figure-html/showcode_runcode_showoutput_15B-1.png" class="img-fluid" width="672"></p>
</div>
</details>
</div>
<p>Mediation estimates and p values for indirect effect(IE), direct effect(DE) and total effect(TE), proportion mediated(PM) and adjusted proportion mediated(APM): See <a href="./workflow.html" target="_blank">Details</a> for more details:</p>
<div class="cell styled-output" data-fold.plot="true">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb48"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">checkTPObject4</span><span class="op">$</span><span class="va">med_coefficients</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details><summary>
plot
</summary><div class="cell-output-display">
<p><img src="simple_code_files/figure-html/showcode_runcode_showoutput_15C-1.png" class="img-fluid" width="672"></p>
</div>
</details>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>One star for p&lt;0.05; Two stars for p&lt;0.01; Three stars for p&lt;0.001.</li>
<li>Note that in the plot of <code>checkTPbject4$med_coefficients</code>, only the selected exposures, mediators and outcomes that we use to do mediation on will show up. The rows in the heatmaps are mediators and the column represents exposure-outcome pairs. For each exposure_outcome pair, 5 result are shown: <em>IE</em> (indirect effect), <em>DE</em> (direct effect), <em>TE</em> (total effect), <em>PM</em>(Proportion Mediated) and <em>APM</em>(Adjusted Proportion Mediated). Please see <a href="https://yingxiaoyan.gitlab.io/triplotgui_tutorial/workflow.html#5.2" target="_blank">Details section</a> for more information. The “BK” before the names of exposures-outcome pairs means that this mediation is using the Coventional Baron-Kenny “product” method.</li>
</ul>
</div>
</div>
</section><section id="step-6-download-data" class="level2" data-number="4.6"><h2 data-number="4.6" class="anchored" data-anchor-id="step-6-download-data">
<span class="header-section-number">4.6</span> Step 6: Download data</h2>
<p>We can save all your output, including data, results and visualization output through the <code><a href="https://rdrr.io/r/base/save.html">save()</a></code> function as an rda file.</p>
<div class="cell styled-output">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">exposure1</span>,<span class="va">Omics1</span>,<span class="va">outcome1</span>,<span class="va">covariates1</span>,</span>
<span>     <span class="va">reduced_Omics1</span>,<span class="va">Correlations_object</span>,<span class="va">Risks_objects</span>,</span>
<span>     <span class="va">mediation_object3</span>,<span class="va">mediation_plot_object3</span>,</span>
<span>     <span class="va">TPObject1</span>,<span class="va">TPObject2</span>,<span class="va">TPObject3</span>,<span class="va">TPObject4</span>,</span>
<span>     <span class="va">checkTPObject4</span>,</span>
<span>     <span class="st">"Tutorial_simple_output.rda"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>


<!-- -->

</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb50" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Tutorial(simple) - Code"</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "Simple demo of using code in TriplotGUI"</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner:</span><span class="co"> true</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner-color:</span><span class="co"> white</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-categories:</span><span class="co"> false</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="an">page-layout:</span><span class="co"> full</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a><span class="co">  html: </span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a><span class="co">    margin-top: 0em</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a><span class="co">    margin-bottom: 0em</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a><span class="co">    padding-top: 0em</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a><span class="co">    padding-bottom: 0em</span></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a><span class="co">    minimal: true</span></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a><span class="co">    smooth-scroll: true</span></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-responsive: true</span></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-location: right</span></span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-depth: 5</span></span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-title: Tutorial</span></span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a><span class="co">    number-sections: true  ## add number in the session or not</span></span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a><span class="co">    number-depth: 4</span></span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: show</span></span>
<span id="cb50-24"><a href="#cb50-24" aria-hidden="true" tabindex="-1"></a><span class="co">    code-summary: "Show the code"</span></span>
<span id="cb50-25"><a href="#cb50-25" aria-hidden="true" tabindex="-1"></a><span class="co">    code-overflow: wrap</span></span>
<span id="cb50-26"><a href="#cb50-26" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb50-27"><a href="#cb50-27" aria-hidden="true" tabindex="-1"></a><span class="co">    code-copy: true</span></span>
<span id="cb50-28"><a href="#cb50-28" aria-hidden="true" tabindex="-1"></a><span class="co">    highlight: tango</span></span>
<span id="cb50-29"><a href="#cb50-29" aria-hidden="true" tabindex="-1"></a><span class="co">    df-print: paged  ## kable is another option How the dataframe looks like </span></span>
<span id="cb50-30"><a href="#cb50-30" aria-hidden="true" tabindex="-1"></a><span class="co">    standalone: false  ### specifies if all assets and libraries must be integrated into the output html file as a standalone document.</span></span>
<span id="cb50-31"><a href="#cb50-31" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-align: right</span></span>
<span id="cb50-32"><a href="#cb50-32" aria-hidden="true" tabindex="-1"></a><span class="co">    theme:  solar</span></span>
<span id="cb50-33"><a href="#cb50-33" aria-hidden="true" tabindex="-1"></a><span class="an">geometry:</span><span class="co"> margin=lin  </span></span>
<span id="cb50-34"><a href="#cb50-34" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb50-35"><a href="#cb50-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-36"><a href="#cb50-36" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include=FALSE}</span></span>
<span id="cb50-37"><a href="#cb50-37" aria-hidden="true" tabindex="-1"></a><span class="do">##This is a function that combines html and rmarkdown. It aims to generate a button that could hide output or plot (fold.output=T or fold.plot=T).</span></span>
<span id="cb50-38"><a href="#cb50-38" aria-hidden="true" tabindex="-1"></a>hooks <span class="ot">=</span> knitr<span class="sc">::</span>knit_hooks<span class="sc">$</span><span class="fu">get</span>()</span>
<span id="cb50-39"><a href="#cb50-39" aria-hidden="true" tabindex="-1"></a>hook_foldable <span class="ot">=</span> <span class="cf">function</span>(type) {</span>
<span id="cb50-40"><a href="#cb50-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">force</span>(type)</span>
<span id="cb50-41"><a href="#cb50-41" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x, options) {</span>
<span id="cb50-42"><a href="#cb50-42" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">=</span> hooks[[type]](x, options)</span>
<span id="cb50-43"><a href="#cb50-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb50-44"><a href="#cb50-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">isTRUE</span>(options[[<span class="fu">paste0</span>(<span class="st">"fold."</span>, type)]])) <span class="fu">return</span>(res)</span>
<span id="cb50-45"><a href="#cb50-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb50-46"><a href="#cb50-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(</span>
<span id="cb50-47"><a href="#cb50-47" aria-hidden="true" tabindex="-1"></a>      <span class="st">"&lt;details&gt;&lt;summary&gt;"</span>, type, <span class="st">"&lt;/summary&gt;</span><span class="sc">\n\n</span><span class="st">"</span>,</span>
<span id="cb50-48"><a href="#cb50-48" aria-hidden="true" tabindex="-1"></a>      res,</span>
<span id="cb50-49"><a href="#cb50-49" aria-hidden="true" tabindex="-1"></a>      <span class="st">"</span><span class="sc">\n\n</span><span class="st">&lt;/details&gt;"</span></span>
<span id="cb50-50"><a href="#cb50-50" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb50-51"><a href="#cb50-51" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb50-52"><a href="#cb50-52" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb50-53"><a href="#cb50-53" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>knit_hooks<span class="sc">$</span><span class="fu">set</span>(</span>
<span id="cb50-54"><a href="#cb50-54" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="fu">hook_foldable</span>(<span class="st">"output"</span>),</span>
<span id="cb50-55"><a href="#cb50-55" aria-hidden="true" tabindex="-1"></a>  <span class="at">plot =</span> <span class="fu">hook_foldable</span>(<span class="st">"plot"</span>)</span>
<span id="cb50-56"><a href="#cb50-56" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb50-57"><a href="#cb50-57" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-58"><a href="#cb50-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-59"><a href="#cb50-59" aria-hidden="true" tabindex="-1"></a>Before starting,please make sure you have installed the TriplotGUI package following <span class="co">[</span><span class="ot">Setup</span><span class="co">](installation.qmd)</span>{target="_blank"}.</span>
<span id="cb50-60"><a href="#cb50-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-61"><a href="#cb50-61" aria-hidden="true" tabindex="-1"></a>The code of at this page can be downloaded <span class="co">[</span><span class="ot">here</span><span class="co">](https://gitlab.com/YingxiaoYan/triplotgui/-/blob/main/Tutorial_code/CAMP_2_applying_TriplotGUI_code.R)</span>{target="_blank"}</span>
<span id="cb50-62"><a href="#cb50-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-63"><a href="#cb50-63" aria-hidden="true" tabindex="-1"></a><span class="fu"># Data description</span></span>
<span id="cb50-64"><a href="#cb50-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-65"><a href="#cb50-65" aria-hidden="true" tabindex="-1"></a>The data used in this page of tutorial can be downloaded <span class="co">[</span><span class="ot">here</span><span class="co">](https://gitlab.com/YingxiaoYan/triplotgui/-/blob/main/data/CAMP_2.rda)</span>{target="_blank"} in rda format.</span>
<span id="cb50-66"><a href="#cb50-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-67"><a href="#cb50-67" aria-hidden="true" tabindex="-1"></a>The Data used for this example of code is ***CAMP_2*** modified from the **CAMP** data provided by the triplot package (Schillemans et al. 2019). **CAMP** was simulated from the authentic data used in a cross-sectional study of carbonhydrate alternatives and metabolic phenotypes in Chinese young adults (Liu et al. 2018). The simulated data ***CAMP_2*** is a list that contains three data frames:</span>
<span id="cb50-68"><a href="#cb50-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-69"><a href="#cb50-69" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Clinical measurements (ClinData, 11 variables): <span class="in">`"AGE"`</span>, <span class="in">`"SEX"`</span>, <span class="in">`"BMI"`</span>, <span class="in">`"triglycerides"`</span>, <span class="in">`"total_cholesterol"`</span> <span class="in">`"HDL"`</span>(high-density lipoprotein cholesterol), <span class="in">`"LDL"`</span>(low-density lipoprotein cholesterol),, <span class="in">`"GGT"`</span>(gamma-glutamyltransferase), <span class="in">`"ALT"`</span>(alanine aminotransferase), <span class="in">`"AST"`</span>(aspartate aminotransferase), <span class="in">`"creatinine"`</span>, <span class="in">`"Urea_nitrogen"`</span>, <span class="in">`"Uric_acid"`</span>, <span class="in">`"Fasting_glucose"`</span>.</span>
<span id="cb50-70"><a href="#cb50-70" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Plasma metabolites predictive of BMI (MetaboliteData, 20 variables)</span>
<span id="cb50-71"><a href="#cb50-71" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Dietary intake as measured by food frequency questionnaires (FoodData, 11 variables): <span class="in">`"Refined_grains"`</span>, <span class="in">`"Coarse_grains"`</span>, <span class="in">`"Red_meat"`</span>, <span class="in">`"Poutry"`</span>, <span class="in">`"Seafood"`</span>, <span class="in">`"Egg"`</span>, <span class="in">`"Animal_organs"`</span>, <span class="in">`"Vegetables"`</span>, <span class="in">`"Fruits"`</span>, <span class="in">`"Potatos"`</span>, <span class="in">`"Legumes"`</span>.</span>
<span id="cb50-72"><a href="#cb50-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-73"><a href="#cb50-73" aria-hidden="true" tabindex="-1"></a>The data frames are row-wise matched by observation and consist of 300 synthetic observations.</span>
<span id="cb50-74"><a href="#cb50-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-75"><a href="#cb50-75" aria-hidden="true" tabindex="-1"></a>**Reference**</span>
<span id="cb50-76"><a href="#cb50-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-77"><a href="#cb50-77" aria-hidden="true" tabindex="-1"></a>Liu X, Liao X, Gan W, et al. Inverse Relationship between Coarse Food Grain Intake and Blood Pressure among Young Chinese Adults. *Am J Hypertens*. 2019;32(4):402–408. <span class="co">[</span><span class="ot">10.1093/ajh/hpy187</span><span class="co">](https://academic.oup.com/ajh/article/32/4/402/5236579?login=true)</span>{target="_blank"}</span>
<span id="cb50-78"><a href="#cb50-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-79"><a href="#cb50-79" aria-hidden="true" tabindex="-1"></a>Schillemans T, Shi L, Liu X, Åkesson A, Landberg R, Brunius C. Visualization and Interpretation of Multivariate Associations with Disease Risk Markers and Disease Risk-The Triplot. *Metabolites*. 2019 Jul 6;9(7):133. <span class="co">[</span><span class="ot">doi: 10.3390/metabo9070133</span><span class="co">](https://www.mdpi.com/2218-1989/9/7/133)</span>{target="_blank"}</span>
<span id="cb50-80"><a href="#cb50-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-81"><a href="#cb50-81" aria-hidden="true" tabindex="-1"></a><span class="fu"># Research question</span></span>
<span id="cb50-82"><a href="#cb50-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-83"><a href="#cb50-83" aria-hidden="true" tabindex="-1"></a>We want to assess the relationship between diet, metabolic profiles and risk factors of metabolic diseases (i.e. BMI, total cholesterol, triglyceride, HDL, LDL). We assume that metabolites serves as mediators, mediating the effect of dietary exposures on BMI outcome.</span>
<span id="cb50-84"><a href="#cb50-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-85"><a href="#cb50-85" aria-hidden="true" tabindex="-1"></a><span class="fu"># Data exploration</span></span>
<span id="cb50-86"><a href="#cb50-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-87"><a href="#cb50-87" aria-hidden="true" tabindex="-1"></a>***CAMP_2*** is loaded in the R environment up on running <span class="in">`library(TriplotGUI)`</span>. We will do some data exploration first to see how the data looks like.</span>
<span id="cb50-88"><a href="#cb50-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-89"><a href="#cb50-89" aria-hidden="true" tabindex="-1"></a><span class="in">```{r noshowcode_runcode_noshowoutput_1}</span></span>
<span id="cb50-90"><a href="#cb50-90" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-91"><a href="#cb50-91" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb50-92"><a href="#cb50-92" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb50-93"><a href="#cb50-93" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-94"><a href="#cb50-94" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(TriplotGUI)</span>
<span id="cb50-95"><a href="#cb50-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-96"><a href="#cb50-96" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-97"><a href="#cb50-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-98"><a href="#cb50-98" aria-hidden="true" tabindex="-1"></a><span class="fu">## Check CAMP_2</span></span>
<span id="cb50-99"><a href="#cb50-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-100"><a href="#cb50-100" aria-hidden="true" tabindex="-1"></a>Check ***CAMP_2*** as a list:</span>
<span id="cb50-101"><a href="#cb50-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-102"><a href="#cb50-102" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_showoutput_1}</span></span>
<span id="cb50-103"><a href="#cb50-103" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-104"><a href="#cb50-104" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-105"><a href="#cb50-105" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: true</span></span>
<span id="cb50-106"><a href="#cb50-106" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-107"><a href="#cb50-107" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(CAMP_2)</span>
<span id="cb50-108"><a href="#cb50-108" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(CAMP_2)</span>
<span id="cb50-109"><a href="#cb50-109" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-110"><a href="#cb50-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-111"><a href="#cb50-111" aria-hidden="true" tabindex="-1"></a><span class="fu">## Check datasets</span></span>
<span id="cb50-112"><a href="#cb50-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-113"><a href="#cb50-113" aria-hidden="true" tabindex="-1"></a>Check the names of variables in each data:</span>
<span id="cb50-114"><a href="#cb50-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-115"><a href="#cb50-115" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_showoutput_2}</span></span>
<span id="cb50-116"><a href="#cb50-116" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-117"><a href="#cb50-117" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-118"><a href="#cb50-118" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: true</span></span>
<span id="cb50-119"><a href="#cb50-119" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-120"><a href="#cb50-120" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(CAMP_2<span class="sc">$</span>ClinData)</span>
<span id="cb50-121"><a href="#cb50-121" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(CAMP_2<span class="sc">$</span>MetaboliteData)</span>
<span id="cb50-122"><a href="#cb50-122" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(CAMP_2<span class="sc">$</span>FoodData)</span>
<span id="cb50-123"><a href="#cb50-123" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-124"><a href="#cb50-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-125"><a href="#cb50-125" aria-hidden="true" tabindex="-1"></a><span class="fu">## Check variables' class</span></span>
<span id="cb50-126"><a href="#cb50-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-127"><a href="#cb50-127" aria-hidden="true" tabindex="-1"></a>We then transform the data to dataframe format and then use TriplotGUI's <span class="in">`checkdata()`</span> function in to examine the classes of variables.</span>
<span id="cb50-128"><a href="#cb50-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-129"><a href="#cb50-129" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_noshowoutput_1}</span></span>
<span id="cb50-130"><a href="#cb50-130" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-131"><a href="#cb50-131" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-132"><a href="#cb50-132" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb50-133"><a href="#cb50-133" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-134"><a href="#cb50-134" aria-hidden="true" tabindex="-1"></a>ClinData<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(CAMP_2<span class="sc">$</span>ClinData)</span>
<span id="cb50-135"><a href="#cb50-135" aria-hidden="true" tabindex="-1"></a>MetaboliteData<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(CAMP_2<span class="sc">$</span>MetaboliteData)</span>
<span id="cb50-136"><a href="#cb50-136" aria-hidden="true" tabindex="-1"></a>FoodData<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(CAMP_2<span class="sc">$</span>FoodData)</span>
<span id="cb50-137"><a href="#cb50-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-138"><a href="#cb50-138" aria-hidden="true" tabindex="-1"></a>ClinData_check<span class="ot">&lt;-</span><span class="fu">checkdata</span>(ClinData)</span>
<span id="cb50-139"><a href="#cb50-139" aria-hidden="true" tabindex="-1"></a>MetaboliteData_check<span class="ot">&lt;-</span><span class="fu">checkdata</span>(MetaboliteData)</span>
<span id="cb50-140"><a href="#cb50-140" aria-hidden="true" tabindex="-1"></a>FoodData_check<span class="ot">&lt;-</span><span class="fu">checkdata</span>(FoodData)</span>
<span id="cb50-141"><a href="#cb50-141" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-142"><a href="#cb50-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-143"><a href="#cb50-143" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_showoutput_3}</span></span>
<span id="cb50-144"><a href="#cb50-144" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-145"><a href="#cb50-145" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-146"><a href="#cb50-146" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: true</span></span>
<span id="cb50-147"><a href="#cb50-147" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-148"><a href="#cb50-148" aria-hidden="true" tabindex="-1"></a>ClinData_check<span class="sc">$</span>class_sumamry_statistics</span>
<span id="cb50-149"><a href="#cb50-149" aria-hidden="true" tabindex="-1"></a>MetaboliteData_check<span class="sc">$</span>class_sumamry_statistics</span>
<span id="cb50-150"><a href="#cb50-150" aria-hidden="true" tabindex="-1"></a>FoodData_check<span class="sc">$</span>class_sumamry_statistics</span>
<span id="cb50-151"><a href="#cb50-151" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-152"><a href="#cb50-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-153"><a href="#cb50-153" aria-hidden="true" tabindex="-1"></a><span class="fu">## Check sanities for variables</span></span>
<span id="cb50-154"><a href="#cb50-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-155"><a href="#cb50-155" aria-hidden="true" tabindex="-1"></a>Whether each variable contains missing (NA) or abnormal values (e.g. NAN, negative values, Indefinite values, blank values) can also be checked.</span>
<span id="cb50-156"><a href="#cb50-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-157"><a href="#cb50-157" aria-hidden="true" tabindex="-1"></a>The previous <span class="in">`checkdata()`</span> function can also generate a table to summarize how many and how many percentage of observations contain NA, NAN, zero, negative, indefinite(inf),and blank values(" ") for each variable in each data frame.</span>
<span id="cb50-158"><a href="#cb50-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-159"><a href="#cb50-159" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_showoutput_4}</span></span>
<span id="cb50-160"><a href="#cb50-160" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-161"><a href="#cb50-161" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-162"><a href="#cb50-162" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: true</span></span>
<span id="cb50-163"><a href="#cb50-163" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-164"><a href="#cb50-164" aria-hidden="true" tabindex="-1"></a>ClinData_check<span class="sc">$</span>everycolumn</span>
<span id="cb50-165"><a href="#cb50-165" aria-hidden="true" tabindex="-1"></a>MetaboliteData_check<span class="sc">$</span>everycolumn</span>
<span id="cb50-166"><a href="#cb50-166" aria-hidden="true" tabindex="-1"></a>FoodData_check<span class="sc">$</span>everycolumn</span>
<span id="cb50-167"><a href="#cb50-167" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-168"><a href="#cb50-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-169"><a href="#cb50-169" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb50-170"><a href="#cb50-170" aria-hidden="true" tabindex="-1"></a>You shall only continue when the class of variables are correct and the missing or abnormal values in the variable are properly handled.</span>
<span id="cb50-171"><a href="#cb50-171" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb50-172"><a href="#cb50-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-173"><a href="#cb50-173" aria-hidden="true" tabindex="-1"></a><span class="fu">## Build data for analysis</span></span>
<span id="cb50-174"><a href="#cb50-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-175"><a href="#cb50-175" aria-hidden="true" tabindex="-1"></a>We see food data as our exposures and BMI, triglycerides, total_cholesterol, HDL and LDL as outcomes. We want to explore their relationships through the metabolomics data, using metabolites as assumed mediators. Sex and age are used as potential confounders for exposure-mediator and mediator-outcome association.</span>
<span id="cb50-176"><a href="#cb50-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-177"><a href="#cb50-177" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_showoutput_5}</span></span>
<span id="cb50-178"><a href="#cb50-178" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-179"><a href="#cb50-179" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-180"><a href="#cb50-180" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: true</span></span>
<span id="cb50-181"><a href="#cb50-181" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-182"><a href="#cb50-182" aria-hidden="true" tabindex="-1"></a>exposure1<span class="ot">&lt;-</span>FoodData</span>
<span id="cb50-183"><a href="#cb50-183" aria-hidden="true" tabindex="-1"></a>Omics1<span class="ot">&lt;-</span>MetaboliteData</span>
<span id="cb50-184"><a href="#cb50-184" aria-hidden="true" tabindex="-1"></a>outcome1<span class="ot">&lt;-</span>ClinData[,<span class="fu">c</span>(<span class="st">"BMI"</span>,<span class="st">"triglycerides"</span>,<span class="st">"total_cholesterol"</span>,<span class="st">"HDL"</span>,<span class="st">"LDL"</span>)]</span>
<span id="cb50-185"><a href="#cb50-185" aria-hidden="true" tabindex="-1"></a>covariates1<span class="ot">&lt;-</span>ClinData[,<span class="fu">c</span>(<span class="st">"SEX"</span> ,<span class="st">"AGE"</span>)]</span>
<span id="cb50-186"><a href="#cb50-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-187"><a href="#cb50-187" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-188"><a href="#cb50-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-189"><a href="#cb50-189" aria-hidden="true" tabindex="-1"></a><span class="fu"># Code example of using TriplotGUI</span></span>
<span id="cb50-190"><a href="#cb50-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-191"><a href="#cb50-191" aria-hidden="true" tabindex="-1"></a>We will use the most simple settings in this example. Please go to <span class="co">[</span><span class="ot">Tutorial(complex)</span><span class="co">](complex_code.qmd)</span>{target="_blank"}.if you want to try more advanced settings.</span>
<span id="cb50-192"><a href="#cb50-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-193"><a href="#cb50-193" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 1: Data reduction of omics data {#simple_link}</span></span>
<span id="cb50-194"><a href="#cb50-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-195"><a href="#cb50-195" aria-hidden="true" tabindex="-1"></a>Using <span class="in">`TriplotGUI`</span> package, first we perform dimension reduction, i.e. principal component analysis (PCA) on metabolomics data.</span>
<span id="cb50-196"><a href="#cb50-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-197"><a href="#cb50-197" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_noshowoutput_2}</span></span>
<span id="cb50-198"><a href="#cb50-198" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-199"><a href="#cb50-199" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-200"><a href="#cb50-200" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb50-201"><a href="#cb50-201" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-202"><a href="#cb50-202" aria-hidden="true" tabindex="-1"></a>reduced_Omics1<span class="ot">&lt;-</span><span class="fu">PCAorWGCNA_plots</span>(<span class="at">dataframe=</span>Omics1,</span>
<span id="cb50-203"><a href="#cb50-203" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">pc_num =</span> <span class="dv">5</span>,</span>
<span id="cb50-204"><a href="#cb50-204" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">option=</span><span class="st">"PCA"</span>)</span>
<span id="cb50-205"><a href="#cb50-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-206"><a href="#cb50-206" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-207"><a href="#cb50-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-208"><a href="#cb50-208" aria-hidden="true" tabindex="-1"></a>You can see scree plot, score plot, loadings plot and biplot at this stage.</span>
<span id="cb50-209"><a href="#cb50-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-210"><a href="#cb50-210" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_showoutput_6}</span></span>
<span id="cb50-211"><a href="#cb50-211" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-212"><a href="#cb50-212" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-213"><a href="#cb50-213" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: true</span></span>
<span id="cb50-214"><a href="#cb50-214" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-215"><a href="#cb50-215" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.plot: true</span></span>
<span id="cb50-216"><a href="#cb50-216" aria-hidden="true" tabindex="-1"></a>reduced_Omics1<span class="sc">$</span>scree_plot</span>
<span id="cb50-217"><a href="#cb50-217" aria-hidden="true" tabindex="-1"></a>reduced_Omics1<span class="sc">$</span>score_plot</span>
<span id="cb50-218"><a href="#cb50-218" aria-hidden="true" tabindex="-1"></a>reduced_Omics1<span class="sc">$</span>loading_plot</span>
<span id="cb50-219"><a href="#cb50-219" aria-hidden="true" tabindex="-1"></a>reduced_Omics1<span class="sc">$</span>scoreloading_plot</span>
<span id="cb50-220"><a href="#cb50-220" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-221"><a href="#cb50-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-222"><a href="#cb50-222" aria-hidden="true" tabindex="-1"></a>We then build a TPObject based on the data reduction result, which is used for saving information and pass them through steps in TriplotGUI.</span>
<span id="cb50-223"><a href="#cb50-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-224"><a href="#cb50-224" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_showoutput_7}</span></span>
<span id="cb50-225"><a href="#cb50-225" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-226"><a href="#cb50-226" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-227"><a href="#cb50-227" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: true</span></span>
<span id="cb50-228"><a href="#cb50-228" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-229"><a href="#cb50-229" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.output: false</span></span>
<span id="cb50-230"><a href="#cb50-230" aria-hidden="true" tabindex="-1"></a>scores<span class="ot">=</span>reduced_Omics1<span class="sc">$</span>object<span class="sc">$</span>scores</span>
<span id="cb50-231"><a href="#cb50-231" aria-hidden="true" tabindex="-1"></a>loadings<span class="ot">&lt;-</span>reduced_Omics1<span class="sc">$</span>object<span class="sc">$</span>loadings</span>
<span id="cb50-232"><a href="#cb50-232" aria-hidden="true" tabindex="-1"></a>variance<span class="ot">&lt;-</span> reduced_Omics1<span class="sc">$</span>object<span class="sc">$</span>variance</span>
<span id="cb50-233"><a href="#cb50-233" aria-hidden="true" tabindex="-1"></a>TPObject1<span class="ot">&lt;-</span><span class="fu">makeTPO</span>(<span class="at">scores=</span>scores,</span>
<span id="cb50-234"><a href="#cb50-234" aria-hidden="true" tabindex="-1"></a>                   <span class="at">loadings=</span>loadings,</span>
<span id="cb50-235"><a href="#cb50-235" aria-hidden="true" tabindex="-1"></a>                   <span class="at">variance=</span>variance)</span>
<span id="cb50-236"><a href="#cb50-236" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-237"><a href="#cb50-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-238"><a href="#cb50-238" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 2: Exposures’ correlations &amp; Outcomes’ associations</span></span>
<span id="cb50-239"><a href="#cb50-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-240"><a href="#cb50-240" aria-hidden="true" tabindex="-1"></a>The correlations between principal component (PC) scores and food items were calculated using Pearson correlations, adjusting for confounders. The associations between PC scores and risk markers were investigated using linear regression (since all food variables are numeric).</span>
<span id="cb50-241"><a href="#cb50-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-242"><a href="#cb50-242" aria-hidden="true" tabindex="-1"></a>The PC scores are saved in the TPObject and the TPObject can be directly used to calculate the correlation coefficients and p values with exposures(food variables) in the <span class="in">`makeCorr()`</span> function, adjusting for confounders.</span>
<span id="cb50-243"><a href="#cb50-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-244"><a href="#cb50-244" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_noshowoutput_3}</span></span>
<span id="cb50-245"><a href="#cb50-245" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-246"><a href="#cb50-246" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-247"><a href="#cb50-247" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb50-248"><a href="#cb50-248" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-249"><a href="#cb50-249" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.output: false</span></span>
<span id="cb50-250"><a href="#cb50-250" aria-hidden="true" tabindex="-1"></a>Correlations_object<span class="ot">&lt;-</span><span class="fu">makeCorr</span>(<span class="at">TPObject=</span>TPObject1,</span>
<span id="cb50-251"><a href="#cb50-251" aria-hidden="true" tabindex="-1"></a>                              <span class="at">corrData=</span>exposure1,</span>
<span id="cb50-252"><a href="#cb50-252" aria-hidden="true" tabindex="-1"></a>                              <span class="at">confounder=</span>covariates1,</span>
<span id="cb50-253"><a href="#cb50-253" aria-hidden="true" tabindex="-1"></a>                              <span class="at">method=</span><span class="st">"pearson"</span>)</span>
<span id="cb50-254"><a href="#cb50-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-255"><a href="#cb50-255" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-256"><a href="#cb50-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-257"><a href="#cb50-257" aria-hidden="true" tabindex="-1"></a>The result of correlations are then added into the TPObject.</span>
<span id="cb50-258"><a href="#cb50-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-259"><a href="#cb50-259" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_showoutput_8}</span></span>
<span id="cb50-260"><a href="#cb50-260" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-261"><a href="#cb50-261" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-262"><a href="#cb50-262" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: true</span></span>
<span id="cb50-263"><a href="#cb50-263" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-264"><a href="#cb50-264" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.output: false</span></span>
<span id="cb50-265"><a href="#cb50-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-266"><a href="#cb50-266" aria-hidden="true" tabindex="-1"></a>TPObject2<span class="ot">&lt;-</span><span class="fu">addCorr</span>(<span class="at">TPObject=</span>TPObject1,</span>
<span id="cb50-267"><a href="#cb50-267" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Corr=</span>Correlations_object<span class="sc">$</span>cor_estimate,</span>
<span id="cb50-268"><a href="#cb50-268" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Corr_p=</span>Correlations_object<span class="sc">$</span>cor_pvalue)</span>
<span id="cb50-269"><a href="#cb50-269" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-270"><a href="#cb50-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-271"><a href="#cb50-271" aria-hidden="true" tabindex="-1"></a>Similarly, the risk estimates (beta coefficients from linear regression) and p values can be calculated from the PC scores saved in the TPObject and the outcome variables, adjusting for confounders.</span>
<span id="cb50-272"><a href="#cb50-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-273"><a href="#cb50-273" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_noshowoutput_4}</span></span>
<span id="cb50-274"><a href="#cb50-274" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-275"><a href="#cb50-275" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-276"><a href="#cb50-276" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb50-277"><a href="#cb50-277" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-278"><a href="#cb50-278" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.output: false</span></span>
<span id="cb50-279"><a href="#cb50-279" aria-hidden="true" tabindex="-1"></a>Risks_object<span class="ot">&lt;-</span><span class="fu">coefficient_get</span>(<span class="at">TPObject=</span>TPObject2,</span>
<span id="cb50-280"><a href="#cb50-280" aria-hidden="true" tabindex="-1"></a>                              <span class="at">outcome=</span>outcome1,</span>
<span id="cb50-281"><a href="#cb50-281" aria-hidden="true" tabindex="-1"></a>                              <span class="at">confounder=</span>covariates1)</span>
<span id="cb50-282"><a href="#cb50-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-283"><a href="#cb50-283" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-284"><a href="#cb50-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-285"><a href="#cb50-285" aria-hidden="true" tabindex="-1"></a>The result of risk estimates are then added into the TPObject.</span>
<span id="cb50-286"><a href="#cb50-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-287"><a href="#cb50-287" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_showoutput_9}</span></span>
<span id="cb50-288"><a href="#cb50-288" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-289"><a href="#cb50-289" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-290"><a href="#cb50-290" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: true</span></span>
<span id="cb50-291"><a href="#cb50-291" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-292"><a href="#cb50-292" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.output: false</span></span>
<span id="cb50-293"><a href="#cb50-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-294"><a href="#cb50-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-295"><a href="#cb50-295" aria-hidden="true" tabindex="-1"></a>TPObject3<span class="ot">&lt;-</span><span class="fu">addRisk</span>(<span class="at">TPObject=</span>TPObject2,</span>
<span id="cb50-296"><a href="#cb50-296" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Risk=</span>Risks_object)</span>
<span id="cb50-297"><a href="#cb50-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-298"><a href="#cb50-298" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-299"><a href="#cb50-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-300"><a href="#cb50-300" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 3: Visualization of Triplot</span></span>
<span id="cb50-301"><a href="#cb50-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-302"><a href="#cb50-302" aria-hidden="true" tabindex="-1"></a>Generate Triplot: Note that Triplot can be generated from any TPObject.</span>
<span id="cb50-303"><a href="#cb50-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-304"><a href="#cb50-304" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_noshowoutput_5}</span></span>
<span id="cb50-305"><a href="#cb50-305" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-306"><a href="#cb50-306" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-307"><a href="#cb50-307" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb50-308"><a href="#cb50-308" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-309"><a href="#cb50-309" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.output: false</span></span>
<span id="cb50-310"><a href="#cb50-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-311"><a href="#cb50-311" aria-hidden="true" tabindex="-1"></a>Triplot_object3<span class="ot">&lt;-</span><span class="fu">TriplotGUI</span>(TPObject3,</span>
<span id="cb50-312"><a href="#cb50-312" aria-hidden="true" tabindex="-1"></a>                            <span class="at">riskOR=</span>F) <span class="co">#risks is shown as coeffcients, not odds ratio</span></span>
<span id="cb50-313"><a href="#cb50-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-314"><a href="#cb50-314" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-315"><a href="#cb50-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-316"><a href="#cb50-316" aria-hidden="true" tabindex="-1"></a>Plotting the triplot</span>
<span id="cb50-317"><a href="#cb50-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-318"><a href="#cb50-318" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_showoutput_10}</span></span>
<span id="cb50-319"><a href="#cb50-319" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-320"><a href="#cb50-320" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-321"><a href="#cb50-321" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: true</span></span>
<span id="cb50-322"><a href="#cb50-322" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-323"><a href="#cb50-323" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.plot: true</span></span>
<span id="cb50-324"><a href="#cb50-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-325"><a href="#cb50-325" aria-hidden="true" tabindex="-1"></a>Triplot_object3<span class="sc">$</span>triplot</span>
<span id="cb50-326"><a href="#cb50-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-327"><a href="#cb50-327" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-328"><a href="#cb50-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-329"><a href="#cb50-329" aria-hidden="true" tabindex="-1"></a>In the triplot, blue circle points represents exposure correlations and the read square points represents outcome risk estimates with confidence interval. PC1 reflected metabolites that were positively associated with BMI and also correlated with a high intake of meat and refined grains, adjusting for age and sex. This implies that the metabolite features that contributes most to PC1, are likely to provide useful information for a potential mechanism of how red meat and refrained grains intake may affect BMI.</span>
<span id="cb50-330"><a href="#cb50-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-331"><a href="#cb50-331" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 4: Mediation analysis and visualization</span></span>
<span id="cb50-332"><a href="#cb50-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-333"><a href="#cb50-333" aria-hidden="true" tabindex="-1"></a>Mediation analysis is then performed using the conventional "product" method on the our exposures (i.e. Refined grains, Red meat), mediators (i.e. PC1 and PC2) and outcome (i.e. BMI) of interest, adjusting for age and sex for both exposure-mediator and mediator-outcome relationship.</span>
<span id="cb50-334"><a href="#cb50-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-335"><a href="#cb50-335" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_noshowoutput_6}</span></span>
<span id="cb50-336"><a href="#cb50-336" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-337"><a href="#cb50-337" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-338"><a href="#cb50-338" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb50-339"><a href="#cb50-339" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-340"><a href="#cb50-340" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.output: false</span></span>
<span id="cb50-341"><a href="#cb50-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-342"><a href="#cb50-342" aria-hidden="true" tabindex="-1"></a>mediation_object3<span class="ot">&lt;-</span></span>
<span id="cb50-343"><a href="#cb50-343" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_mediation_traditional</span> (<span class="at">mediator=</span>TPObject3<span class="sc">$</span>scores[,<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>),<span class="at">drop=</span>F], </span>
<span id="cb50-344"><a href="#cb50-344" aria-hidden="true" tabindex="-1"></a>                             <span class="co"># Specfiying at least 2 components so that there can be a 2-dimensional plot</span></span>
<span id="cb50-345"><a href="#cb50-345" aria-hidden="true" tabindex="-1"></a>                             <span class="at">exposure=</span>exposure1[,<span class="fu">c</span>(<span class="st">"Refined_grains"</span>,<span class="st">"Red_meat"</span>),<span class="at">drop=</span>F],</span>
<span id="cb50-346"><a href="#cb50-346" aria-hidden="true" tabindex="-1"></a>                             <span class="at">outcome=</span>outcome1[,<span class="st">"BMI"</span>,<span class="at">drop=</span>F],</span>
<span id="cb50-347"><a href="#cb50-347" aria-hidden="true" tabindex="-1"></a>                             <span class="at">confounder_ME=</span>covariates1,</span>
<span id="cb50-348"><a href="#cb50-348" aria-hidden="true" tabindex="-1"></a>                             <span class="at">confounder_OE=</span>covariates1)</span>
<span id="cb50-349"><a href="#cb50-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-350"><a href="#cb50-350" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-351"><a href="#cb50-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-352"><a href="#cb50-352" aria-hidden="true" tabindex="-1"></a>Look at the barplot to have a more direct view on direct, indirect and total effects for each combination</span>
<span id="cb50-353"><a href="#cb50-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-354"><a href="#cb50-354" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_noshowoutput_7}</span></span>
<span id="cb50-355"><a href="#cb50-355" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-356"><a href="#cb50-356" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-357"><a href="#cb50-357" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb50-358"><a href="#cb50-358" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-359"><a href="#cb50-359" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.plot: true</span></span>
<span id="cb50-360"><a href="#cb50-360" aria-hidden="true" tabindex="-1"></a>mediation_plot_object3<span class="ot">&lt;-</span><span class="fu">plot_mediation</span>(mediation_object3)</span>
<span id="cb50-361"><a href="#cb50-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-362"><a href="#cb50-362" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-363"><a href="#cb50-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-364"><a href="#cb50-364" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_showoutput_11}</span></span>
<span id="cb50-365"><a href="#cb50-365" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-366"><a href="#cb50-366" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-367"><a href="#cb50-367" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: true</span></span>
<span id="cb50-368"><a href="#cb50-368" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-369"><a href="#cb50-369" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.plot: true</span></span>
<span id="cb50-370"><a href="#cb50-370" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: 100%</span></span>
<span id="cb50-371"><a href="#cb50-371" aria-hidden="true" tabindex="-1"></a>mediation_plot_object3</span>
<span id="cb50-372"><a href="#cb50-372" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-373"><a href="#cb50-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-374"><a href="#cb50-374" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb50-375"><a href="#cb50-375" aria-hidden="true" tabindex="-1"></a>The barplot showed direct, indirect and total effect for each exposure-mediator-outcome combination. It is a convenient tool to check the direction and magnitude of mediation estimates. Red color represents significant positive effect (p<span class="sc">\&lt;</span>0.05); Blue color represents significant negative effect (p<span class="sc">\&lt;</span>0.05). Grey represents insignificant effect. One star for p<span class="sc">\&lt;</span>0.05; Two stars for p<span class="sc">\&lt;</span>0.01; Three stars for p<span class="sc">\&lt;</span>0.001;</span>
<span id="cb50-376"><a href="#cb50-376" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb50-377"><a href="#cb50-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-378"><a href="#cb50-378" aria-hidden="true" tabindex="-1"></a>Add the mediation result into the TPObject.</span>
<span id="cb50-379"><a href="#cb50-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-380"><a href="#cb50-380" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_showoutput_12}</span></span>
<span id="cb50-381"><a href="#cb50-381" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-382"><a href="#cb50-382" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-383"><a href="#cb50-383" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: true</span></span>
<span id="cb50-384"><a href="#cb50-384" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-385"><a href="#cb50-385" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.plot: true</span></span>
<span id="cb50-386"><a href="#cb50-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-387"><a href="#cb50-387" aria-hidden="true" tabindex="-1"></a>TPObject4<span class="ot">&lt;-</span><span class="fu">add_mediation</span>(TPObject3, mediation_object3)</span>
<span id="cb50-388"><a href="#cb50-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-389"><a href="#cb50-389" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-390"><a href="#cb50-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-391"><a href="#cb50-391" aria-hidden="true" tabindex="-1"></a>Make the triplot with mediation.</span>
<span id="cb50-392"><a href="#cb50-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-393"><a href="#cb50-393" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_noshowoutput_8}</span></span>
<span id="cb50-394"><a href="#cb50-394" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-395"><a href="#cb50-395" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-396"><a href="#cb50-396" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb50-397"><a href="#cb50-397" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-398"><a href="#cb50-398" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.plot: true</span></span>
<span id="cb50-399"><a href="#cb50-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-400"><a href="#cb50-400" aria-hidden="true" tabindex="-1"></a>Triplot_object4<span class="ot">&lt;-</span><span class="fu">mediation_triplot</span>(TPObject4,</span>
<span id="cb50-401"><a href="#cb50-401" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">which_show =</span> <span class="fu">c</span>(<span class="st">"IE"</span>,<span class="st">"TE"</span>)</span>
<span id="cb50-402"><a href="#cb50-402" aria-hidden="true" tabindex="-1"></a>                                   )</span>
<span id="cb50-403"><a href="#cb50-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-404"><a href="#cb50-404" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-405"><a href="#cb50-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-406"><a href="#cb50-406" aria-hidden="true" tabindex="-1"></a>Only showing the mediation estimates (indirect and total effect).</span>
<span id="cb50-407"><a href="#cb50-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-408"><a href="#cb50-408" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_showoutput_13}</span></span>
<span id="cb50-409"><a href="#cb50-409" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-410"><a href="#cb50-410" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-411"><a href="#cb50-411" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: true</span></span>
<span id="cb50-412"><a href="#cb50-412" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-413"><a href="#cb50-413" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.plot: true</span></span>
<span id="cb50-414"><a href="#cb50-414" aria-hidden="true" tabindex="-1"></a>Triplot_object4<span class="sc">$</span>mediation_plot</span>
<span id="cb50-415"><a href="#cb50-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-416"><a href="#cb50-416" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-417"><a href="#cb50-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-418"><a href="#cb50-418" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb50-419"><a href="#cb50-419" aria-hidden="true" tabindex="-1"></a>The indirect effect is presented as triangle points and the total effect is presented as circles. While indirect effect can only be presented with a mediator(e.g. PC1, PC2), total effect is always there and the value remains the same for specific exposure-outcome pairs, regardless of which mediation analysis we want to present in the figure.</span>
<span id="cb50-420"><a href="#cb50-420" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb50-421"><a href="#cb50-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-422"><a href="#cb50-422" aria-hidden="true" tabindex="-1"></a>Plotting the triplot with mediation</span>
<span id="cb50-423"><a href="#cb50-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-424"><a href="#cb50-424" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_showoutput_14}</span></span>
<span id="cb50-425"><a href="#cb50-425" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-426"><a href="#cb50-426" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-427"><a href="#cb50-427" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: true</span></span>
<span id="cb50-428"><a href="#cb50-428" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-429"><a href="#cb50-429" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.plot: true</span></span>
<span id="cb50-430"><a href="#cb50-430" aria-hidden="true" tabindex="-1"></a>Triplot_object4<span class="sc">$</span>final_plot</span>
<span id="cb50-431"><a href="#cb50-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-432"><a href="#cb50-432" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-433"><a href="#cb50-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-434"><a href="#cb50-434" aria-hidden="true" tabindex="-1"></a>Base on the barplot and the triplot with mediaiton, we observed a significant mediation effect through PC1 for Red_meat-BMI and refined_grain-BMI association. This further implies that the metabolite features that contributes to PC1 are likely to mediate the pathway from red meat and refined grain intake to BMI change.</span>
<span id="cb50-435"><a href="#cb50-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-436"><a href="#cb50-436" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 5: Compare correlations, associations and mediations</span></span>
<span id="cb50-437"><a href="#cb50-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-438"><a href="#cb50-438" aria-hidden="true" tabindex="-1"></a>Users can check the heatmaps of correlations, risk estimations and mediation results from the TPObject through the <span class="in">`checkTPO_ggplot()`</span> function in TriplotGUI.</span>
<span id="cb50-439"><a href="#cb50-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-440"><a href="#cb50-440" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_noshowoutput_9}</span></span>
<span id="cb50-441"><a href="#cb50-441" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-442"><a href="#cb50-442" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-443"><a href="#cb50-443" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb50-444"><a href="#cb50-444" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-445"><a href="#cb50-445" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.plot: true</span></span>
<span id="cb50-446"><a href="#cb50-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-447"><a href="#cb50-447" aria-hidden="true" tabindex="-1"></a>checkTPObject4<span class="ot">&lt;-</span><span class="fu">checkTPO_ggplot</span>(TPObject4)</span>
<span id="cb50-448"><a href="#cb50-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-449"><a href="#cb50-449" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-450"><a href="#cb50-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-451"><a href="#cb50-451" aria-hidden="true" tabindex="-1"></a>Correlation coefficients and p values between PC scores and exposures:</span>
<span id="cb50-452"><a href="#cb50-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-453"><a href="#cb50-453" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_showoutput_15A}</span></span>
<span id="cb50-454"><a href="#cb50-454" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-455"><a href="#cb50-455" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-456"><a href="#cb50-456" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: true</span></span>
<span id="cb50-457"><a href="#cb50-457" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-458"><a href="#cb50-458" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.plot: true</span></span>
<span id="cb50-459"><a href="#cb50-459" aria-hidden="true" tabindex="-1"></a>checkTPObject4<span class="sc">$</span>corr_coefficients</span>
<span id="cb50-460"><a href="#cb50-460" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-461"><a href="#cb50-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-462"><a href="#cb50-462" aria-hidden="true" tabindex="-1"></a>Risk estimates(beta coefficients) and p values between PC scores and outcomes:</span>
<span id="cb50-463"><a href="#cb50-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-464"><a href="#cb50-464" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_showoutput_15B}</span></span>
<span id="cb50-465"><a href="#cb50-465" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-466"><a href="#cb50-466" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-467"><a href="#cb50-467" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: true</span></span>
<span id="cb50-468"><a href="#cb50-468" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-469"><a href="#cb50-469" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.plot: true</span></span>
<span id="cb50-470"><a href="#cb50-470" aria-hidden="true" tabindex="-1"></a>checkTPObject4<span class="sc">$</span>risk_coefficients</span>
<span id="cb50-471"><a href="#cb50-471" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-472"><a href="#cb50-472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-473"><a href="#cb50-473" aria-hidden="true" tabindex="-1"></a>Mediation estimates and p values for indirect effect(IE), direct effect(DE) and total effect(TE), proportion mediated(PM) and adjusted proportion mediated(APM): See <span class="co">[</span><span class="ot">Details</span><span class="co">](workflow.qmd)</span>{target="_blank"} for more details:</span>
<span id="cb50-474"><a href="#cb50-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-475"><a href="#cb50-475" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_runcode_showoutput_15C}</span></span>
<span id="cb50-476"><a href="#cb50-476" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb50-477"><a href="#cb50-477" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-478"><a href="#cb50-478" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: true</span></span>
<span id="cb50-479"><a href="#cb50-479" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-480"><a href="#cb50-480" aria-hidden="true" tabindex="-1"></a><span class="co">#| fold.plot: true</span></span>
<span id="cb50-481"><a href="#cb50-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-482"><a href="#cb50-482" aria-hidden="true" tabindex="-1"></a>checkTPObject4<span class="sc">$</span>med_coefficients</span>
<span id="cb50-483"><a href="#cb50-483" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-484"><a href="#cb50-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-485"><a href="#cb50-485" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb50-486"><a href="#cb50-486" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>One star for p<span class="sc">\&lt;</span>0.05; Two stars for p<span class="sc">\&lt;</span>0.01; Three stars for p<span class="sc">\&lt;</span>0.001.</span>
<span id="cb50-487"><a href="#cb50-487" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Note that in the plot of <span class="in">`checkTPbject4$med_coefficients`</span>, only the selected exposures, mediators and outcomes that we use to do mediation on will show up. The rows in the heatmaps are mediators and the column represents exposure-outcome pairs. For each exposure_outcome pair, 5 result are shown: *IE* (indirect effect), *DE* (direct effect), *TE* (total effect), *PM*(Proportion Mediated) and *APM*(Adjusted Proportion Mediated). Please see [Details section](https://yingxiaoyan.gitlab.io/triplotgui_tutorial/workflow.html#5.2){target="_blank"} for more information. The "BK" before the names of exposures-outcome pairs means that this mediation is using the Coventional Baron-Kenny "product" method.</span>
<span id="cb50-488"><a href="#cb50-488" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb50-489"><a href="#cb50-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-490"><a href="#cb50-490" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 6: Download data</span></span>
<span id="cb50-491"><a href="#cb50-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-492"><a href="#cb50-492" aria-hidden="true" tabindex="-1"></a>We can save all your output, including data, results and visualization output through the <span class="in">`save()`</span> function as an rda file.</span>
<span id="cb50-493"><a href="#cb50-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-494"><a href="#cb50-494" aria-hidden="true" tabindex="-1"></a><span class="in">```{r showcode_noruncode_noshowoutput_1}</span></span>
<span id="cb50-495"><a href="#cb50-495" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb50-496"><a href="#cb50-496" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb50-497"><a href="#cb50-497" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb50-498"><a href="#cb50-498" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: true</span></span>
<span id="cb50-499"><a href="#cb50-499" aria-hidden="true" tabindex="-1"></a><span class="co">#| classes: styled-output</span></span>
<span id="cb50-500"><a href="#cb50-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-501"><a href="#cb50-501" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(exposure1,Omics1,outcome1,covariates1,</span>
<span id="cb50-502"><a href="#cb50-502" aria-hidden="true" tabindex="-1"></a>     reduced_Omics1,Correlations_object,Risks_objects,</span>
<span id="cb50-503"><a href="#cb50-503" aria-hidden="true" tabindex="-1"></a>     mediation_object3,mediation_plot_object3,</span>
<span id="cb50-504"><a href="#cb50-504" aria-hidden="true" tabindex="-1"></a>     TPObject1,TPObject2,TPObject3,TPObject4,</span>
<span id="cb50-505"><a href="#cb50-505" aria-hidden="true" tabindex="-1"></a>     checkTPObject4,</span>
<span id="cb50-506"><a href="#cb50-506" aria-hidden="true" tabindex="-1"></a>     <span class="st">"Tutorial_simple_output.rda"</span>)</span>
<span id="cb50-507"><a href="#cb50-507" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left"><span class="faux-block">© 2024 Yingxiao Yan CC BY-SA 4.0</span></div>   
    <div class="nav-footer-center"><span class="faux-block"><a href="https://gitlab.com/YingxiaoYan/TriplotGUI">TriplotGUI gitlab</a></span></div>
    <div class="nav-footer-right"><span class="faux-block cyan"><a href="https://yingxiaoyan.gitlab.io/triplotgui_tutorial/">View source of this site on GitLab</a></span></div>
  </div>
</footer>


<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>